# Browser branding
ac_add_options --with-app-name=glide
ac_add_options --with-app-basename=glide
ac_add_options --with-branding=browser/branding/glide

export MOZ_USER_DIR="Glide Browser"
export MOZ_APP_BASENAME=glide
export MOZ_BRANDING_DIRECTORY=browser/branding/glide
export MOZ_OFFICIAL_BRANDING_DIRECTORY=browser/branding/glide
# macos only
export MOZ_MACBUNDLE_NAME="Glide.app"

ac_add_options --with-distribution-id=app.glide-browser

export GLIDE_FIREFOX_VERSION=${firefox_version}
export MOZ_APPUPDATE_HOST=updates.glide-browser.app

# updates
ac_add_options --enable-unverified-updates
ac_add_options --enable-update-channel=glide

# Uncomment if builds are too resource hungry
# mk_add_options MOZ_MAKE_FLAGS="-j4"
# ac_add_options --enable-linker=gold

# Misc
export MOZ_STUB_INSTALLER=1
export MOZ_INCLUDE_SOURCE_INFO=1
export MOZ_SOURCE_REPO=https://github.com/glide-browser/glide
export MOZ_SOURCE_CHANGESET=${changeset}

ac_add_options --enable-application=browser

if test -x "$(command -v sccache)"; then
  ac_add_options --with-ccache=sccache
fi

# features
ac_add_options --enable-raw
ac_add_options --enable-webrtc
ac_add_options --enable-jxl
ac_add_options --enable-av1

# release optimisations
if test "$GLIDE_RELEASE"; then
  ac_add_options --enable-release
  ac_add_options --enable-strip
  ac_add_options --enable-optimize
  ac_add_options --disable-debug
  ac_add_options --disable-debug-symbols
  ac_add_options --disable-debug-js-modules
  ac_add_options --disable-tests
  ac_add_options --disable-rust-tests
  ac_add_options --enable-rust-simd
  ac_add_options --enable-wasm-simd
fi

# release hardening
if test "$GLIDE_RELEASE"; then
  ac_add_options --enable-hardening
  ac_add_options --enable-proxy-bypass-protection
fi

# change this if you need to
ac_add_options --disable-debug
